<!-- @format -->
<template>
	<ClientOnly>
		<div class="page-content">
			<div class="welcome-section">
				<h2>æ­¡è¿ä½¿ç”¨ WebHarvester</h2>
				<p>é€™æ˜¯æ‚¨çš„å€‹äººè³‡æ–™çˆ¬èŸ²åŠ©æ‰‹ï¼Œè®“æ‚¨è¼•é¬†å–å¾—ç¶²é è³‡æ–™</p>

				<div class="action-buttons">
					<template v-if="isLoggedIn">
						<button
							class="primary-button"
							@click="navigateTo('/scrawl')"
						>
							é–‹å§‹çˆ¬èŸ²
						</button>
						<button
							class="secondary-button"
							@click="
								navigateTo('https://www.firecrawl.dev/', {
									external: true,
								})
							"
						>
							æŸ¥çœ‹æ•™å­¸
						</button>
					</template>
					<template v-else>
						<button
							class="primary-button"
							@click="navigateTo('/auth')"
						>
							ç«‹å³ç™»å…¥
						</button>
						<button
							class="secondary-button"
							@click="navigateTo('/auth/register')"
						>
							å»ºç«‹å¸³è™Ÿ
						</button>
					</template>
				</div>
			</div>

			<div class="features-section">
				<div class="feature-card">
					<div class="feature-icon">ğŸ“Š</div>
					<h3>æ•¸æ“šåˆ†æ</h3>
					<p>å¿«é€Ÿåˆ†ææ‚¨çš„çˆ¬èŸ²æ•¸æ“š</p>
				</div>
				<div class="feature-card">
					<div class="feature-icon">ğŸ“±</div>
					<h3>å¤šè¨­å‚™æ”¯æ´</h3>
					<p>åœ¨ä»»ä½•è¨­å‚™ä¸ŠåŸ·è¡Œæ‚¨çš„çˆ¬èŸ²ä»»å‹™</p>
				</div>
			</div>
		</div>

		<template #fallback>
			<div class="loading-container">
				<div class="loading-spinner"></div>
				<p>è¼‰å…¥ä¸­...</p>
			</div>
		</template>
	</ClientOnly>
</template>

<script setup>
import { onMounted } from 'vue';

const { isLoggedIn, authChecked, checkAuth } = useAuth();

onMounted(async () => {
	console.log('index é é¢è¼‰å…¥');
	console.log(
		'åˆå§‹ç‹€æ…‹ - authChecked:',
		authChecked.value,
		'isLoggedIn:',
		isLoggedIn.value
	);

	await checkAuth();

	console.log(
		'é©—è­‰å¾Œç‹€æ…‹ - authChecked:',
		authChecked.value,
		'isLoggedIn:',
		isLoggedIn.value
	);
});
</script>

<style scoped>
@import '@/assets/css/index.css';
</style>
